<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdminAX | Dashboard (PC)</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link href="https://unpkg.com/tabulator-tables@6.2.1/dist/css/tabulator_bootstrap5.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        body { background-color: #f1f3f5; padding: 25px; font-family: 'Pretendard', sans-serif; }
        .toolbar-card { background: #fff; padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .main-card { background: #fff; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); overflow: hidden; }
        #receipt-table { width: 100% !important; }
        #qrcode-container { padding: 10px; background: white; border-radius: 8px; border: 1px solid #ddd; }
        #qrcode img { width: 80px; height: 80px; }
        .preview-container { display: none; background: #fafafa; padding: 20px; text-align: center; border-top: 1px solid #eee; }
        .preview-container img { max-width: 90%; max-height: 500px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        
        #imageOverlay {
		    position: fixed;
		    top: 50%;   /* í™”ë©´ ì¤‘ì•™ ì‹œì‘ */
		    left: 50%;
		    transform: translate(-50%, -50%); /* ì²˜ìŒì—” ì¤‘ì•™ ì •ë ¬ */
		    width: 90%;
		    z-index: 2000;
		    display: none;
		    box-shadow: 0 0 20px rgba(0,0,0,0.5);
		}
		
		.card-header {
		    cursor: move; /* "ë‚˜ë¥¼ ì¡ê³  ì›€ì§ì´ì„¸ìš”" í‘œì‹œ */
		}
    </style>
</head>
<body>
    <div class="container-fluid">
        <header class="d-flex justify-content-between align-items-center mb-4">
            <h3 class="fw-bold m-0 text-dark">ğŸ›¡ï¸ AdminAX Receipt Dashboard</h3>
            <div id="qrcode-container" class="text-center">
                <div id="qrcode"></div>
                <div class="small text-muted mt-1" style="font-size: 10px;">Mobile Connect</div>
            </div>
        </header>

        
        <div class="toolbar-card d-flex align-items-center gap-3">
		    <input type="file" id="pcFileBtn" multiple accept="image/*" style="display:none" onchange="onPCFilesSelected(event)">
		    <button class="btn btn-outline-primary fw-bold px-4" onclick="document.getElementById('pcFileBtn').click()">ğŸ“‚ íŒŒì¼ ì²¨ë¶€</button>
		    <button class="btn btn-primary px-4 fw-bold" onclick="startAnalysis()">ğŸš€ ì˜ìˆ˜ì¦ ì¸ì‹</button>
		    <div class="ms-auto">
		        <div id="status-badge" class="badge bg-success ms-auto">SYSTEM READY</div>
		    </div>
		</div>
		
		<!-- 
		<div class="d-flex justify-content-end mb-2">
		    <button class="btn btn-outline-primary fw-bold px-4" 
		            onclick="copyGridToClipboard()" 
		            style="opacity: 0.8;">
		        ğŸ“‹ ë³µì‚¬
		    </button>
		</div>
		 -->
		
		<div class="main-card">
		    <div class="progress rounded-0" style="height: 5px;">
		        <div id="progBar" class="progress-bar progress-bar-striped progress-bar-animated" style="width: 0%"></div>
		    </div>
		    
		    <div id="receipt-table"></div>
		
		    <div class="card-footer bg-white d-flex justify-content-between align-items-center py-3 border-top">
			    <span class="text-secondary small fw-medium">
			        * ğŸ” ì•„ì´ì½˜ì„ í´ë¦­í•˜ì—¬ ì›ë³¸ í™•ì¸ ë° ìˆ˜ë™ ìˆ˜ì •ì„ ì§„í–‰í•˜ì„¸ìš”.
			    </span>
			
			    <div class="d-flex gap-2" style="padding-left: 10px;padding-right: 10px;">
			        <button class="btn btn-outline-primary fw-bold px-4" onclick="copyGridToClipboard()">
			            ğŸ“‹ ë³µì‚¬
			        </button>
			        <button style="display:none;" class="btn btn-success fw-bold px-4" onclick="submitFinalData()">
			            âœ… ì œì¶œ
			        </button>
			    </div>
			</div>
		</div>
    </div>
    
    <div id="imageOverlay" style="display:none; position: fixed; z-index: 2000; 
	     width: 850px; height: 800px; min-width: 600px; min-height: 600px; 
	     background: white; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.4); 
	     overflow: hidden; resize: both;"> 
	    
	    <div id="overlayHeader" style="padding: 10px; background: #333; color: white; cursor: move; display: flex; justify-content: space-between; align-items: center; height: 40px;">
	        <span class="small fw-bold">ğŸ–¼ï¸ ì›ë³¸ ëŒ€ì¡° (ìƒë‹¨: ì°¸ì¡° / ì¤‘ì•™: ì¤ŒÂ·íŒ¬ / í•˜ë‹¨: ë°ì´í„°)</span>
	        <button type="button" class="btn-close btn-close-white" onclick="closeOverlay()" style="font-size: 0.7rem;"></button>
	    </div>
	
	    <div id="overlayReference" style="padding: 12px; background: #f8f9fa; border-bottom: 1px solid #dee2e6; display: flex; gap: 25px; font-size: 0.75rem; height: 100px;">
	        <div style="flex: 1.2; border-right: 1px solid #ced4da; padding-right: 15px;">
	            <div style="font-weight: bold; color: #495057; margin-bottom: 5px;">ğŸš— ë³´ìœ  ì°¨ëŸ‰</div>
	            <div style="line-height: 1.5;">
	                <span style="font-weight: bold;">175í•˜9967</span> (ë ˆì´) <br>
	                <span style="font-weight: bold;">189í˜¸4359</span> (ëª¨ë‹)
	            </div>
	        </div>
	        <div style="flex: 5;">
	            <div style="font-weight: bold; color: #495057; margin-bottom: 5px;">ğŸ’³ ì¹´ë“œ ë§¤í•‘ (ì „ì²´ ë²ˆí˜¸ ëŒ€ì¡°ìš©)</div>
	            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 4px; line-height: 1.4;">
	                <div><span style="color:#0d6efd; font-weight: bold;">4140-0325-2373-8918</span> : ì›ë°±</div>
	                <div><span style="color:#0d6efd; font-weight: bold;">5585-0323-8097-7988</span> : ì¡°í˜¸ì„±</div>
	                <div><span style="color:#0d6efd; font-weight: bold;">5585-0323-8092-7991</span> : ë°•ì •ìš°</div>
	                <div><span style="color:#0d6efd; font-weight: bold;">4140-0323-8993-5913</span> : ë°±í˜„ìš°</div>
	                <div style="grid-column: span 2; margin-top: 3px; border-top: 1px dashed #ddd; padding-top: 3px;">
	                    <span style="color:#dc3545; font-weight: bold;">4140-0309-0233-8961 / 4140-0311-0899-1983</span> : ì‚¬ë¬´ì‹¤ì¹´ë“œ
	                </div>
	            </div>
	        </div>
	    </div>
	    
	    <div id="imgContainer" style="width: 100%; height: calc(100% - 280px); background: #333; display: flex; align-items: center; justify-content: center; overflow: hidden; cursor: grab;">
	        <img id="overlayImg" src="" style="max-width: 100%; max-height: 100%; object-fit: contain; transition: transform 0.1s ease-out; transform-origin: center;">
	    </div>
	    
	    <div id="overlayDataTable" style="padding: 15px 15px 25px 15px; background: white; height: 140px; overflow-x: auto; border-top: 1px solid #dee2e6;">
	        <table class="table table-sm table-bordered" style="font-size: 0.75rem; margin-bottom: 0; min-width: 800px;">
	            <thead class="table-light">
	                <tr style="text-align: center;">
	                    <th>ì¼ì</th><th>ì¹´ë“œëª…</th><th>ì¹´ë“œë²ˆí˜¸</th><th>ì°¨ì¢…</th><th>ì°¨ëŸ‰ë²ˆí˜¸</th><th>ì‚¬ìš©ì²˜</th><th>ê³„ì •</th><th>ìš©ë„</th><th>ë¶€ê°€ì„¸</th><th>í•©ê³„</th><th>ì‚¬ìš©ì</th>
	                </tr>
	            </thead>
	            <tbody>
	                <tr id="overlayDataRow" style="text-align: center; vertical-align: middle;">
	                    </tr>
	            </tbody>
	        </table>
	    </div>
	</div>
    
    <script src="https://unpkg.com/tabulator-tables@6.2.1/dist/js/tabulator.min.js"></script>
    <script src="receipt.js"></script>
</body>
</html>